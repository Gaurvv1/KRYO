async function callGenerate() {
  const payload = {
    imageUrl: uploadedUrl || null,
    text_context: document.getElementById('textIn').value,
    vibe: document.querySelector('select#vibe').value,
    length: document.querySelector('select#mLength').value,
    color_mode: document.querySelector('select#colorMode').value,
    primary_color: document.getElementById('primaryColor').value,
    secondary_color: document.getElementById('secondaryColor').value,
    shade_intensity: parseFloat(document.getElementById('shade').value),
    direct_generate: document.getElementById('directToggle').checked,
    regenerate_count: regenCount || 0
  };

  const res = await fetch('/api/generate-meme', {
    method:'POST',
    headers:{ 'Content-Type':'application/json' },
    body: JSON.stringify(payload)
  });
  const json = await res.json();
  // json should contain meme_text + overlay_style
  console.log(json);
  // render on canvas or show error
}
